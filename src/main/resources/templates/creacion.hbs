{{! ============================================
    CREACI칍N DE HECHOS
    Formulario para cargar nuevos hechos hist칩ricos
    ============================================ }}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>{{titulo}}</title>
  <link rel="stylesheet" href="/assets/creacion.css">
</head>
<body>

  <div class="form-container">
    {{! --- T칤tulo de la P치gina --- }}
    <h1>{{titulo}}</h1>

    {{! --- Mensajes Flash --- }}
    {{#if flash_error}}
      <div class="flash error">{{flash_error}}</div>
    {{/if}}

    {{#if flash_message}}
      <div class="flash success">{{flash_message}}</div>
    {{/if}}

    {{! ==========================================
        FORMULARIO DE CREACI칍N DE HECHO
        ========================================== }}
    <form action="/hechos" method="POST" enctype="multipart/form-data">

      {{! Campo: T칤tulo del Hecho }}
      <label for="titulo">T칤tulo</label>
      <input type="text" name="titulo" placeholder="Ej: Incendio en el centro" required>

      {{! Campo: Descripci칩n }}
      <label for="descripcion">Descripci칩n</label>
      <textarea name="descripcion" placeholder="Describe brevemente el hecho..." required></textarea>

      {{! Campo: Categor칤a }}
      <label for="categoria">Categor칤a</label>
      <input type="text" name="categoria" placeholder="Ej: Incendios, Accidentes, Contaminaci칩n" required>

      {{! Campo: Latitud }}
      <label for="latitud">Latitud</label>
      <input type="number" step="0.0001" name="latitud" placeholder="-34.6037" required>

      {{! Campo: Longitud }}
      <label for="longitud">Longitud</label>
      <input type="number" step="0.0001" name="longitud" placeholder="-58.3816" required>

      {{! Campo: Fecha del Acontecimiento }}
      <label for="fechaAcontecimiento">Fecha del Acontecimiento</label>
      <input type="datetime-local" name="fechaAcontecimiento" required>

      {{! Campo: Multimedia (opcional) }}
      <label for="multimedia">Contenido Multimedia (imagen o video)</label>
      <input type="file" name="multimedia" accept="image/*,video/*">

      {{! --- Vista Previa del Archivo --- }}
      <div class="preview" id="preview-container">
        <p><strong>Vista previa:</strong></p>
        <div id="preview-content"></div>
      </div>

      {{! Bot칩n de Env칤o }}
      <button type="submit">游늸 Cargar Hecho</button>
    </form>

    {{! --- Enlace de Retorno --- }}
    <p style="margin-top: 20px;">
      <a href="/home">拘勇 Volver al Inicio</a>
    </p>
  </div>

  {{! ==========================================
      SCRIPT: Vista Previa de Multimedia
      ========================================== }}
  <script>
    const input = document.querySelector('input[name="multimedia"]');
    const previewContainer = document.getElementById('preview-container');
    const previewContent = document.getElementById('preview-content');

    input.addEventListener('change', (event) => {
      const file = event.target.files[0];
      if (!file) {
        previewContainer.style.display = 'none';
        return;
      }

      const url = URL.createObjectURL(file);
      previewContent.innerHTML = '';

      if (file.type.startsWith('image/')) {
        const img = document.createElement('img');
        img.src = url;
        previewContent.appendChild(img);
      } else if (file.type.startsWith('video/')) {
        const video = document.createElement('video');
        video.src = url;
        video.controls = true;
        previewContent.appendChild(video);
      }

      previewContainer.style.display = 'block';
    });
  </script>
</body>
</html>

